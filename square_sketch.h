//==============================================================================
//    File Name:    square_sketch.h
//    Description:  Header Main Application
//==============================================================================

#ifndef SQUARE_SKETCH_H
#define	SQUARE_SKETCH_H
#include "AxisEncoder.h"
#include "SquareSketchEEPROM.h"
#include "SquareSketchPicture.h"

#define PEN_LED 15
//#define SQSK_DEBUG 1

#define SPLASHDELAY 3000

#define logo_width  61
#define logo_height 64

const uint8_t PROGMEM logo_data[] = {
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x0f, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x07, 0xff, 0xfe, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x3f, 0xff, 0xff, 0xc0, 0x00, 0xe0, 0x00, 0x01, 0xff, 0xff, 0xff, 0xf0, 0x01, 0xe0, 
0x00, 0x03, 0xff, 0xff, 0xff, 0xfc, 0x01, 0xc0, 0x00, 0x0f, 0xf0, 0x7f, 0xf7, 0xff, 0x03, 0xc0, 
0x00, 0x1f, 0xe0, 0x3f, 0xc1, 0xff, 0x83, 0x80, 0x00, 0x3f, 0xc0, 0x1f, 0x80, 0xff, 0xc7, 0x80, 
0x00, 0x7f, 0xc0, 0x1f, 0x00, 0x7f, 0xcf, 0x80, 0x00, 0xff, 0xc0, 0x1f, 0x00, 0x7f, 0xcf, 0x00, 
0x01, 0xff, 0xc0, 0x1f, 0x00, 0x7f, 0x9f, 0x00, 0x01, 0xff, 0xc0, 0x1f, 0x00, 0x7f, 0x3e, 0x00, 
0x03, 0xff, 0xe0, 0x3f, 0x00, 0x7f, 0x3e, 0x00, 0x07, 0xff, 0xf0, 0x7f, 0x80, 0xfe, 0x7c, 0x00, 
0x07, 0xff, 0xff, 0xff, 0xc1, 0xfc, 0xfc, 0x00, 0x0f, 0xe7, 0xff, 0xff, 0xff, 0xfc, 0xf9, 0x00, 
0x0f, 0x81, 0xff, 0xff, 0xff, 0xf9, 0xf9, 0x00, 0x0f, 0x00, 0xff, 0xff, 0xff, 0xf3, 0xf3, 0x00, 
0x1f, 0x00, 0x7f, 0xff, 0xff, 0xf3, 0xf3, 0x00, 0x1e, 0x00, 0x7f, 0xff, 0xff, 0xe7, 0xe7, 0x80, 
0x1e, 0x00, 0x7f, 0xff, 0xff, 0xe7, 0xe7, 0x80, 0x1f, 0x00, 0x7f, 0xff, 0xff, 0xcf, 0xcf, 0x80, 
0x1f, 0x00, 0xff, 0xff, 0xff, 0x9f, 0xcf, 0x80, 0x1f, 0x80, 0xff, 0xff, 0xff, 0x9f, 0x9f, 0x00, 
0x3f, 0xc3, 0xff, 0xff, 0xff, 0x3f, 0x9f, 0x00, 0x3f, 0xff, 0xff, 0xff, 0xfe, 0x7f, 0xbf, 0x00, 
0x3f, 0xff, 0xff, 0xff, 0xfe, 0x7f, 0x3e, 0x00, 0x3f, 0xff, 0xff, 0xff, 0xfc, 0xff, 0x3e, 0x00, 
0x3f, 0xff, 0xff, 0xff, 0xf9, 0xfe, 0x7c, 0x00, 0x1f, 0xc3, 0xff, 0xff, 0xf9, 0xfe, 0x7c, 0x00, 
0x1f, 0x01, 0xff, 0xff, 0xf3, 0xfc, 0xf8, 0x00, 0x1f, 0x00, 0xff, 0xff, 0xf7, 0xfc, 0xf0, 0x00, 
0x1e, 0x00, 0x7f, 0xff, 0xe7, 0xf9, 0xe0, 0x00, 0x1e, 0x00, 0x7f, 0xff, 0xc7, 0xf9, 0xc0, 0x00, 
0x1e, 0x00, 0x7f, 0xff, 0xc1, 0xf3, 0x00, 0x00, 0x0f, 0x00, 0xff, 0xff, 0x90, 0x70, 0x00, 0x00, 
0x0f, 0x00, 0xff, 0xf8, 0x1c, 0x20, 0x00, 0x00, 0x0f, 0x81, 0xff, 0xe0, 0x3f, 0x00, 0x00, 0x00, 
0x0f, 0xff, 0xff, 0xc0, 0x0f, 0x80, 0x00, 0x00, 0x07, 0xff, 0xff, 0x80, 0x03, 0xc0, 0x00, 0x00, 
0x07, 0xff, 0xff, 0x80, 0xe0, 0x80, 0x00, 0x00, 0x03, 0xff, 0xff, 0x81, 0xf8, 0x00, 0x00, 0x00, 
0x03, 0xff, 0xff, 0x83, 0xfe, 0x00, 0x00, 0x00, 0x01, 0xff, 0xff, 0x83, 0xfe, 0x00, 0x00, 0x00, 
0x00, 0xff, 0xff, 0x87, 0xfe, 0x00, 0x00, 0x00, 0x00, 0xff, 0xff, 0x87, 0xfe, 0x00, 0x00, 0x00, 
0x00, 0x7f, 0xff, 0x87, 0xfe, 0x00, 0x00, 0x00, 0x00, 0x3f, 0xff, 0xc7, 0xfc, 0x00, 0x00, 0x00, 
0x00, 0x0f, 0xff, 0xc7, 0xfc, 0x00, 0x00, 0x00, 0x00, 0x07, 0xff, 0xc7, 0xfc, 0x00, 0x00, 0x00, 
0x00, 0x01, 0xff, 0xc7, 0xf8, 0x00, 0x00, 0x00, 0x00, 0x00, 0x3f, 0x87, 0xf0, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x07, 0xe0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x07, 0xe0, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x07, 0xc0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0f, 0x80, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x0e, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x1c, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x18, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
};

const char about1[] PROGMEM =  "L Knob:Y Axis";
const char about2[] PROGMEM =  "R Knob:X Axis";
const char about3[] PROGMEM =  "LTap:Erase RTap:SwPen";
const char about4[] PROGMEM =  "Long:Main Menu";
const char about5[] PROGMEM =  "Off/On/Blink =";
const char about6[] PROGMEM =  "Move/Draw/Erase";
const char about7[] PROGMEM =  "   Tap to Exit";

const char mode98[] PROGMEM =  "Clear Sketch OK";
const char mode97[] PROGMEM =  "Sketch Saved OK";
const char mode96[] PROGMEM =  "Sketch Loaded OK";
const char mode95[] PROGMEM =  "Clear Saved Sketch OK";
const char mode94[] PROGMEM =  "Reset All Opts OK";
const char mode93[] PROGMEM =  "ERROR!!!!!";
const char exit90[] PROGMEM =  "   Tap to Exit";
const char mode80[] PROGMEM =  "Saving...";
const char mode81[] PROGMEM =  "Loading...";
const char mode82[] PROGMEM =  "Clearing...";

const char ok0[] PROGMEM = "L: YES  R: NO";
const char ok1[] PROGMEM = "Are you sure?";
const char ok2[] PROGMEM = "Clear Sketch?";
const char ok3[] PROGMEM = "Save Sketch?";
const char ok4[] PROGMEM = "Load Sketch?";
const char ok5[] PROGMEM = "Clear Saved Sketch?";
const char ok6[] PROGMEM = "Reset All Options?";

const char splashtxt0[] PROGMEM = "Square        Sketch";

PGM_P const about_table[] PROGMEM = 
{
    about1,
    about2,
    about3,
    about5,
    about6,
    about4,
    about7,
};

PGM_P const modes_table[] PROGMEM = 
{
    mode98,
    mode97,
    mode96,
    mode95,
    mode94,
    exit90,
    mode93,
    mode80,
    mode81,
    mode82,
};

PGM_P const confirm_table[] PROGMEM =
{
    ok0,
    ok1,
    ok2,
    ok3,
    ok4,
    ok5,
};

PGM_P const splash_table[] PROGMEM =
{
    splashtxt0,
};

extern bool cleardisplay;
extern bool draw_initialized;
extern bool load_buffer;

void u8g_prepare(void);
void draw(void);
void setup(void);
void loop(void);
void drawPixelWithPen(point);
void drawPixelPrev(point);
void write_to_eeprom(void);
void read_from_eeprom(void);
void clear_eeprom(void);
void empty_lines(uint8_t, char*, char*);
void load_sketch(void);
void save_sketch(void);
void clear_save_buffer(void);
void setCurrentPixel(uint16_t, uint16_t);
void correctCursor(void);

#endif	/* SQUARE_SKETCH_H */
